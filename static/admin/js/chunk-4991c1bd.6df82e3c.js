(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4991c1bd"],{"5eec":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Card",{attrs:{bordered:!1}},[n("p",{attrs:{slot:"title"},slot:"title"},[t._v("教程管理")]),n("Row",[n("Col",{attrs:{span:"18"}},[n("Col",{staticStyle:{display:"flex"},attrs:{span:"6"}},[n("span",{staticStyle:{width:"60px","padding-top":"5px","margin-left":"10px"}},[t._v("标题：")]),n("Input",{attrs:{placeholder:"请输入标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),n("Col",{staticStyle:{display:"flex"},attrs:{span:"4"}},[n("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:t.search}},[t._v("搜索")])],1)],1),n("Col",{staticStyle:{display:"flex","justify-content":"flex-end"},attrs:{span:"6"}},[n("Button",{attrs:{type:"primary",icon:"ios-add",to:{name:"course_add"}}},[t._v("新增教程")])],1)],1),n("Row",[n("Col",{staticStyle:{"margin-top":"15px"},attrs:{span:"24"}},[n("Table",{attrs:{border:"",columns:t.columns,data:t.data},scopedSlots:t._u([{key:"id",fn:function(e){e.row;var s=e.index;return[n("span",[t._v(t._s(s+1))])]}},{key:"title",fn:function(e){var s=e.row;e.index;return[n("span",[t._v(t._s(s.title))])]}},{key:"info",fn:function(e){var s=e.row;e.index;return[n("span",{staticStyle:{display:"-webkit-box",overflow:"hidden","text-overflow":"ellipsis","-webkit-box-orient":"vertical","-webkit-line-clamp":"3"}},[t._v(t._s(s.info))])]}},{key:"is_active",fn:function(e){var n=e.row;e.index;return[t._v("\n            "+t._s(1==n.is_active?"更新中...":"已完结")+"\n          ")]}},{key:"offline",fn:function(e){var s=e.row;e.index;return[n("span",[1==s.offline?n("Icon",{staticStyle:{color:"#00bb00"},attrs:{type:"md-checkmark-circle",size:24}}):n("Icon",{staticStyle:{color:"red"},attrs:{size:24,type:"md-close-circle"}}),t._v(t._s(1==s.offline?"上线":"已下线"))],1)]}},{key:"add_time",fn:function(e){var s=e.row;e.index;return[n("span",[t._v(t._s(s.add_time))])]}},{key:"user",fn:function(e){var s=e.row;e.index;return[n("span",[t._v(t._s(s.user.username))])]}},{key:"action",fn:function(e){var s=e.row;e.index;return[n("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.courses_add(s.id,s.title)}}},[n("Icon",{attrs:{type:"ios-eye-outline",size:18}}),t._v("查看")],1),n("Button",{staticClass:"text-right",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.update(s.id)}}},[n("Icon",{attrs:{type:"md-create",size:18}}),t._v("修改")],1)]}}])}),n("Page",{ref:"currents",attrs:{total:t.count,"page-size":t.pageSize,"show-elevator":"","show-total":""},on:{"on-change":t.page}})],1)],1)],1)],1)},a=[],i=n("cabd"),r=n("c276"),o=n("90de"),c=n("66df"),l={data:function(){return{title:"",count:0,columns:[{title:"序号",slot:"id"},{title:"课程名字",slot:"title"},{title:"缩略图",slot:"info",tooltip:!0,width:350,align:"center"},{title:"状态",slot:"offline"},{title:"更新状态",slot:"is_active"},{title:"作者",slot:"user"},{title:"创建时间",slot:"add_time"},{title:"操作",slot:"action"}],data:[],pageSize:10}},created:function(){var t=this;this.viewAccessAll&&Object(i["f"])(Object(r["k"])("token")).then(function(e){200==e.status&&(t.data=e.data.results,t.count=e.data.count)}),this.viewAccessSuper&&Object(i["e"])(Object(r["k"])("token")).then(function(e){200==e.status&&(t.data=e.data.results,t.count=e.data.count)})},computed:{access:function(){return this.$store.state.user.access},viewAccessAll:function(){return Object(o["c"])(["is_staff"],this.access)},viewAccessSuper:function(){return Object(o["c"])(["is_superuser"],this.access)}},methods:{page:function(t){var e=this;c["a"].request({url:"/api/courseList/?page="+t+"&title="+this.title,headers:{Authorization:"JWT "+Object(r["k"])("token")},method:"get"}).then(function(t){e.data=t.data.results})},update:function(t){this.$router.push({name:"course_update",params:{id:t}})},courses_add:function(t,e){this.$router.push({name:"tutorial",params:{id:t,title:e}})},search:function(){var t=this;Object(i["g"])(this.title,Object(r["k"])("token")).then(function(e){200==e.status&&(t.$refs.currents.currentPage=1,t.data=e.data.results,t.count=e.data.count)})}}},u=l,d=(n("9366"),n("2877")),p=Object(d["a"])(u,s,a,!1,null,"21971022",null);e["default"]=p.exports},9366:function(t,e,n){"use strict";var s=n("a849"),a=n.n(s);a.a},a849:function(t,e,n){}}]);